<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>点红心有惊喜哦</title>
    <link rel="stylesheet" href="css/index.css">
    <script type="text/javascript" src='js/jquery.min.js'></script>
    <script type="text/javascript" src='js/anime.min.js'></script>
</head>
<body>
<p id="tip_text" class="tip_text">点红心有惊喜哦</p>
<div class="controls__item like">
    <svg width="397" height="470" version="1">
        <path class="main"
              d="M211 226c9-9 21-14 34-14 29 0 50 26 50 54 0 34-53 77-78 95-5 3-7 3-12 0-25-18-78-61-78-95 0-28 21-54 50-54 13 0 25 5 34 14z"/>
        <path class="second"
              d="M211 226c9-9 21-14 34-14 29 0 50 26 50 54 0 34-53 77-78 95-5 3-7 3-12 0-25-18-78-61-78-95 0-28 21-54 50-54 13 0 25 5 34 14z"/>
        <path class="line line1" d="M171 294c-43-12-106-47-111-62-18-52 0-125 0-125"/>
        <path class="line line2" d="M197 244c-11-31-25-75-32-119-12-79-5-125-5-125"/>
        <path class="line line3" d="M258 251c23-18 49-43 61-67 25-50 19-74 13-153"/>
        <path class="line line4" d="M246 304c22 15 54 34 79 37 46 7 58-53 62-88s-8-96-8-96"/>
        <path class="line line5" d="M217 330c6 36 23 85 62 111 69 46 117-56 117-56"/>
        <path class="line line6" d="M204 330c-9 46-25 112-46 134-34 35-66-111-66-111"/>
        <path class="line line7" d="M191 309c-24 25-69 63-108 74C15 402 0 234 0 234"/>
    </svg>
    <img class="heart heart1" src="img/l.png" width="40" alt="">
    <img class="heart heart2" src="img/l.png" width="40" alt="">
    <img class="heart heart3" src="img/l.png" width="40" alt="">
    <img class="heart heart4" src="img/l.png" width="40" alt="">
    <img class="heart heart5" src="img/l.png" width="40" alt="">
    <img class="heart heart6" src="img/l.png" width="40" alt="">
    <img class="heart heart7" src="img/l.png" width="40" alt="">
</div>
<a id="continue_text" class="continue_text" href="main.html">继续</a>
<script type="text/javascript">
    let getRandomInt = (min, max) => {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    };
    let mainHeart = anime();
    let secondHeart = anime();
    let path1 = anime.path('.line1');
    let path2 = anime.path('.line2');
    let path3 = anime.path('.line3');
    let path4 = anime.path('.line4');
    let path5 = anime.path('.line5');
    let path6 = anime.path('.line6');
    let path7 = anime.path('.line7');
    let floatingHearts = () => {
        $('.heart').show();
        anime({
            targets: '.heart1',
            translateX: path1('x'),
            translateY: path1('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000
        });
        anime({
            targets: '.heart2',
            translateX: path2('x'),
            translateY: path2('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000
        });
        anime({
            targets: '.heart3',
            translateX: path3('x'),
            translateY: path3('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000
        });
        anime({
            targets: '.heart4',
            translateX: path4('x'),
            translateY: path4('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000,
        });
        anime({
            targets: '.heart5',
            translateX: path5('x'),
            translateY: path5('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000
        });
        anime({
            targets: '.heart6',
            translateX: path6('x'),
            translateY: path6('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000
        });
        anime({
            targets: '.heart7',
            translateX: path7('x'),
            translateY: path7('y'),
            scale: {value: [1, 0], delay: getRandomInt(400, 600), duration: getRandomInt(1000, 2000)},
            easing: 'easeInOutCubic',
            duration: 2000,
        });
    };
    $('body').on('click', '.like', (e) => {
        let $this = $(e.currentTarget);
        if ($this.hasClass('active')) {
            secondHeart.pause();
            mainHeart.pause();
            $this.toggleClass('active');
            mainHeart = anime({targets: '.like .main', scale: 1, duration: 1, delay: 0});
            anime({targets: '.like .second', scale: 0, easing: 'linear', duration: 150});
            $('#continue_text').css('display', 'none');
            $('#tip_text').css('display', 'block');
        } else {
            secondHeart.pause();
            mainHeart.pause();
            $this.toggleClass('active');
            anime({
                targets: '.like .second',
                scale: 0,
                easeing: 'linear',
                duration: 0,
                complete: () => {
                    secondHeart = anime({targets: '.like .second', scale: 1});
                    mainHeart = anime({targets: '.like .main', scale: 0, duration: 1, delay: 300});
                }
            });
            floatingHearts();
            $('#continue_text').css('display', 'block');
            $('#tip_text').css('display', 'none');
        }
    });
</script>
</body>
</html>